{
  "meta": {
    "appName": "Demo Canonical App",
    "version": "1.0.0",
    "schemaVersion": "1.0.0",
    "generatedAt": "2025-10-15T10:00:00Z",
    "authors": ["Demo"],
    "description": "Dummy contract for parser validation and UI smoke test"
  },
  "dataModels": {
    "post": {
      "fields": {
        "id": { "type": "string", "required": true },
        "title": { "type": "string", "required": true },
        "imageUrl": { "type": "string" },
        "body": { "type": "string" },
        "publishedAt": { "type": "string" }
      }
    },
    "user": {
      "fields": {
        "id": { "type": "string", "required": true },
        "name": { "type": "string" },
        "avatarUrl": { "type": "string" }
      }
    }
  },
  "services": {
    "demo": {
      "baseUrl": "https://api.example.com",
      "endpoints": {
        "ping": { "path": "/ping", "method": "GET" },
        "listPosts": {
          "path": "/posts",
          "method": "GET",
          "responseSchema": { "type": "object", "properties": { "data": { "type": "array", "items": { "$ref": "#/dataModels/post" } } }, "required": ["data"] }
        }
      }
    },
    "auth": {
      "baseUrl": "${API_BASE_URL}",
      "endpoints": {
        "login": { "path": "/auth/login", "method": "POST" },
        "refresh": { "path": "/auth/refresh", "method": "POST" },
        "logout": { "path": "/auth/logout", "method": "POST" }
      }
    }
  },
  "pagesUI": {
    "routes": {
      "/": { "pageId": "home" },
      "/profile": { "pageId": "profile", "auth": true },
      "/form": { "pageId": "form" },
      "/login": { "pageId": "login" }
    },
    "bottomNavigation": {
      "enabled": true,
      "initialIndex": 0,
      "items": [
        { "pageId": "home", "title": "Home", "icon": "home" },
        { "pageId": "profile", "title": "Profile", "icon": "person" },
        { "pageId": "form", "title": "Form", "icon": "doc_text" }
      ]
    },
    "pages": {
      "home": {
        "id": "home",
        "title": "Home",
        "layout": "scroll",
        "navigationBar": { "title": "Demo Home" },
        "children": [
          {
            "type": "hero",
            "style": {
              "padding": 16,
              "backgroundColor": "${theme.surface}",
              "borderRadius": 12
            },
            "children": [
              {
                "type": "text",
                "text": "Welcome to the Demo Canonical App",
                "style": {
                  "fontSize": 20,
                  "fontWeight": "bold",
                  "color": "${theme.onSurface}"
                }
              },
              {
                "type": "text",
                "text": "This contract validates and renders components.",
                "style": { "color": "${theme.onSurfaceVariant}" }
              }
            ]
          },
          {
            "type": "text",
            "binding": "${state.welcomeMessage}",
            "style": { "color": "${theme.primary}" }
          },
          {
            "type": "row",
            "spacing": 8,
            "children": [
              {
                "type": "chip",
                "text": "New",
                "style": {
                  "backgroundColor": "#EEF2FF",
                  "foregroundColor": "#1F2937"
                }
              },
              {
                "type": "chip",
                "text": "Featured",
                "style": {
                  "backgroundColor": "#E8F5E9",
                  "foregroundColor": "#1F2937"
                }
              }
            ]
          },
          {
            "type": "button",
            "text": "Show Dialog",
            "style": {
              "backgroundColor": "#0066CC",
              "foregroundColor": "#FFFFFF",
              "padding": { "horizontal": 16, "vertical": 12 },
              "borderRadius": 8
            },
            "onTap": {
              "action": "showDialog",
              "params": {
                "title": "Hello",
                "message": "Parser works! UI rendered from JSON."
              }
            }
          },
          {
            "type": "textField",
            "id": "email",
            "label": "Email",
            "placeholder": "name@example.com",
            "validation": {
              "email": true,
              "required": true,
              "message": "Please enter a valid email"
            }
          },
          {
            "type": "textButton",
            "text": "Go to Profile",
            "onTap": { "action": "navigate", "route": "/profile" }
          },
          {
            "type": "textButton",
            "text": "Go to Login",
            "onTap": { "action": "navigate", "route": "/login" }
          }
        ]
      },
      "profile": {
        "id": "profile",
        "title": "Profile",
        "layout": "column",
        "navigationBar": { "title": "Profile" },
        "children": [
          {
            "type": "image",
            "src": "https://picsum.photos/200",
            "style": { "width": 150, "height": 150 }
          },
          { "type": "text", "text": "Name: John Doe" },
          {
            "type": "icon",
            "name": "person_circle",
            "size": 32,
            "style": { "color": "${theme.primary}" }
          },
          {
            "type": "textButton",
            "text": "Open Website",
            "onTap": {
              "action": "openUrl",
              "params": { "url": "https://example.com" }
            }
          }
        ]
      },
      "form": {
        "id": "form",
        "title": "Form",
        "layout": "scroll",
        "navigationBar": { "title": "Form" },
        "children": [
          {
            "type": "hero",
            "style": {
              "padding": 16,
              "backgroundColor": "${theme.surface}",
              "borderRadius": 12
            },
            "children": [
              {
                "type": "text",
                "text": "Form Demo",
                "style": { "fontSize": 20, "fontWeight": "bold" }
              },
              {
                "type": "text",
                "text": "Fill out the fields and submit to see the values.",
                "style": { "color": "${theme.onSurfaceVariant}" }
              }
            ]
          },
          {
            "type": "form",
            "style": {
              "padding": { "horizontal": 16, "vertical": 8 },
              "backgroundColor": "${theme.surface}",
              "borderRadius": 8
            },
            "children": [
              {
                "type": "textField",
                "id": "fullName",
                "label": "Full Name",
                "placeholder": "Jane Doe",
                "validation": {
                  "required": true,
                  "message": "Name is required"
                },
                "onChanged": {
                  "action": "updateState",
                  "params": { "key": "form.fullName" }
                }
              },
              {
                "type": "textField",
                "id": "email",
                "label": "Email",
                "placeholder": "you@example.com",
                "validation": {
                  "email": true,
                  "required": true,
                  "message": "Valid email required"
                },
                "onChanged": {
                  "action": "updateState",
                  "params": { "key": "form.email" }
                }
              },
              {
                "type": "textField",
                "id": "password",
                "label": "Password",
                "placeholder": "••••••",
                "obscureText": true,
                "validation": {
                  "required": true,
                  "minLength": 6,
                  "message": "Min 6 characters"
                },
                "onChanged": {
                  "action": "updateState",
                  "params": { "key": "form.password" }
                }
              },
              {
                "type": "textField",
                "id": "bio",
                "label": "Bio",
                "placeholder": "Tell us about yourself...",
                "maxLines": 4,
                "onChanged": {
                  "action": "updateState",
                  "params": { "key": "form.bio" }
                }
              },
              {
                "type": "row",
                "mainAxisAlignment": "spaceBetween",
                "crossAxisAlignment": "center",
                "children": [
                  { "type": "text", "text": "Subscribe to newsletter" },
                  {
                    "type": "switch",
                    "onChanged": {
                      "action": "updateState",
                      "params": { "key": "form.subscribe" }
                    }
                  }
                ]
              },
              { "type": "text", "text": "Satisfaction", "style": { "color": "${theme.onSurfaceVariant}" } },
              {
                "type": "slider",
                "onChanged": {
                  "action": "updateState",
                  "params": { "key": "form.satisfaction" }
                }
              },
              {
                "type": "button",
                "text": "Submit",
                "style": {
                  "backgroundColor": "${theme.primary}",
                  "foregroundColor": "#FFFFFF",
                  "padding": { "horizontal": 16, "vertical": 12 },
                  "borderRadius": 8
                },
                "onTap": {
                  "action": "submitForm",
                  "params": { "formId": "form" }
                }
              }
            ]
          }
        ]
      }
      ,
      "login": {
        "id": "login",
        "title": "Login",
        "layout": "scroll",
        "navigationBar": { "title": "Login" },
        "children": [
          {
            "type": "hero",
            "style": {
              "padding": 16,
              "backgroundColor": "${theme.surface}",
              "borderRadius": 12
            },
            "children": [
              { "type": "text", "text": "Welcome back", "style": { "fontSize": 20, "fontWeight": "bold" } },
              { "type": "text", "text": "Sign in to continue", "style": { "color": "${theme.onSurfaceVariant}" } }
            ]
          },
          {
            "type": "form",
            "style": {
              "padding": { "horizontal": 16, "vertical": 8 },
              "backgroundColor": "${theme.surface}",
              "borderRadius": 8
            },
            "children": [
              {
                "type": "textField",
                "id": "loginEmail",
                "label": "Email",
                "placeholder": "you@example.com",
                "keyboardType": "emailAddress",
                "validation": { "email": true, "required": true, "message": "Valid email required" },
                "onChanged": { "action": "updateState", "params": { "key": "login.email" } }
              },
              {
                "type": "textField",
                "id": "loginPassword",
                "label": "Password",
                "placeholder": "••••••",
                "obscureText": true,
                "validation": { "required": true, "minLength": 6, "message": "Min 6 characters" },
                "onChanged": { "action": "updateState", "params": { "key": "login.password" } }
              },
              {
                "type": "button",
                "text": "Sign In",
                "style": { "backgroundColor": "${theme.primary}", "foregroundColor": "#FFFFFF", "padding": { "horizontal": 16, "vertical": 12 }, "borderRadius": 8 },
                "onTap": {
                  "action": "apiCall",
                  "service": "auth",
                  "endpoint": "login",
                  "params": {
                    "email": "${state.login.email}",
                    "password": "${state.login.password}"
                  },
                "onSuccess": {
                  "action": "sequence",
                  "params": {
                    "steps": [
                        { "action": "showSuccess", "params": { "message": "Login successful" } },
                        { "action": "setAuthToken", "params": { "value": "${response.accessToken}" } },
                        { "action": "updateState", "params": { "key": "refreshToken", "scope": "global", "value": "${response.refreshToken}" } },
                        { "action": "navigate", "route": "/" }
                      ]
                    }
                  },
                  "onError": { "action": "showError", "params": { "message": "Login failed" } }
                }
              }
            ]
          }
        ]
      }
    }
  },
  "state": {
    "global": {
      "theme": { "type": "string", "default": "light", "persistence": "local" },
      "welcomeMessage": {
        "type": "string",
        "default": "This message is bound from state."
      },
      "authToken": { "type": "string", "persistence": "secure" },
      "refreshToken": { "type": "string", "persistence": "secure" },
      "user": { "type": "object", "persistence": "secure" }
    },
    "pages": {}
  },
  "eventsActions": {
    "onAppStart": [
      { "action": "showSuccess", "params": { "message": "Contract loaded" } }
    ],
    "actions": {}
  },
  "themingAccessibility": {
    "tokens": {
      "light": {
        "primary": "#0D6EFD",
        "onPrimary": "#FFFFFF",
        "surface": "#FFFFFF",
        "onSurface": "#1F2937",
        "onSurfaceVariant": "#6B7280",
        "onSurfaceMuted": "#9CA3AF",
        "muted": "#9CA3AF"
      },
      "dark": {
        "primary": "#0D6EFD",
        "onPrimary": "#FFFFFF",
        "surface": "#111827",
        "onSurface": "#F9FAFB",
        "onSurfaceVariant": "#6B7280",
        "onSurfaceMuted": "#9CA3AF",
        "muted": "#9CA3AF"
      }
    },
    "typography": {
      "title": { "fontSize": 20, "fontWeight": "bold" },
      "body": { "fontSize": 16 },
      "caption": { "fontSize": 13 }
    },
    "accessibility": { "reduceMotion": false }
  },
  "assets": {
    "icons": {
      "home": "home",
      "person": "person",
      "doc_text": "doc_text",
      "success": "check_mark",
      "error": "xmark_circle"
    }
  },
  "validations": {
    "email": { "type": "regex", "pattern": "^[\\w-]+(\\.[\\w-]+)*@([\\w-]+\\.)+[a-zA-Z]{2,7}$" },
    "password": { "type": "minLength", "value": 6 }
  },
  "permissionsFlags": {
    "featureA": true,
    "featureB": false
  },
  "pagination": {
    "pageSize": 10,
    "defaultPage": 1
  },
  "analytics": {
    "backendUrl": "${ANALYTICS_BACKEND_URL}",
    "enableUserTracking": true,
    "trackedComponents": ["email", "loginEmail", "loginPassword"],
    "wsUrl": "${WS_URL}"
  }
}